{literal}
<script type="text/ng-template" id="editRecordModalHelpDesk.template">
    <link rel="stylesheet" href="build/css/intlTelInput.css">
	<form class="form form-vertical" novalidate="novalidate" name="ticketForm">
			<div class="modal-header">
				<button type="button" class="close" ng-click="cancel()" title="Close">&times;</button>
				<h4 class="modal-title" ng-show="editRecord.id">Edit Ticket - {{editRecord.ticket_title}}</h4>
				<h4 class="modal-title" ng-show="!editRecord.id">{{'Add New Service Request'|translate}}</h4>
			</div>
			<div class="modal-body" scroll-me="{'height':'350px'}">
				<div class="form-group ServiceRequestForm">
					<div style="padding:10px" ng-repeat="block in blocksMod">
						<h4><b>{{block.label}}</b></h4>
						<div ng-repeat="editables in block.fields">
							<div class="row">
								<div class="col-sm-6 col-md-6 col-lg-6" ng-repeat="editable in editables" id="{{editable.name}}" ng-class="{'hide': !editable.initialDisplay}">
									<div ng-switch  on="editable.type.name">
										<div ng-switch-when="picklist">
											<ng-form name="innerForm" ng-class="{'has-error':innerForm.name.$error.required && submit}">
												<label style="font-weight: 100;">{{editable.label}}</label>
												<span ng-show="{{editable.mandatory}}" class="text-danger mandatory-label">*</span>
												<select id="ele{{$parent.editable.name}}" ng-change="handledependency($parent.editable.name,data[$parent.editable.name])" class="form-control {{$parent.editable.name}}" name="name" ng-model="data[$parent.editable.name]" ng-required="{{editable.mandatory}}">
													<option ng-repeat="picklistValue in editable.type.picklistValues" [ngValue]="picklistValue.value">{{picklistValue.value}}</option>
												</select>
											</ng-form>
										</div>
										<div ng-switch-when="multipicklist">
											<ng-form name="innerForm" ng-class="{'has-error':innerForm.name.$error.required && submit}">
												<label style="font-weight: 100;">{{editable.label}}</label>
												<span ng-show="{{editable.mandatory}}" class="text-danger mandatory-label">*</span>
												<ui-select multiple name="name" ng-model="data[$parent.editable.name]" ng-required="{{editable.mandatory}}" portal-select>
													<ui-select-match>{{$item.label}}</ui-select-match>
													<ui-select-choices repeat="picklistValue in editable.type.picklistValues|propsFilter: {label: $select.search,value: $select.search} track by picklistValue.label">
														{{picklistValue.label}}
													</ui-select-choices>
												</ui-select>
											</ng-form>
										</div>
										<div ng-switch-when="string">
											<ng-form name="innerForm" ng-class="{'has-error':innerForm.name.$error.required && submit}">
												<label style="font-weight: 100;">{{editable.label}}</label>
												<span ng-show="{{editable.mandatory}}" class="text-danger field-error mandatory-label">*</span>
												<input type="text" name="{{editable.label}}" class="form-control" ng-model="data[$parent.editable.name]" ng-required="{{editable.mandatory}}">
											</ng-form>
										</div>
										<div id="{{$parent.editable.name}}hideOrShowInputId" ng-switch-when="integer">
											<div ng-if="$parent.editable.name == 'hmr'">
												<ng-form name="innerForm" ng-class="{'has-error':(innerForm.name.$error.required && submit) || innerForm.name.$error.pattern}">
													<label style="font-weight: 100;">{{editable.label}}</label>
													<span ng-show="{{editable.mandatory}}" class="text-danger field-error mandatory-label">*</span>
													<input id="{{$parent.editable.name}}IdEle" type="number" name="name" min="{{lastHMR}}" class="form-control" ng-model-options="{updateOn:'blur'}" ng-pattern="/^[\-\+\ ]?\d+$/" ng-trim="false" ng-model="data[$parent.editable.name]" ng-required="{{editable.mandatory}}">
												</ng-form>
												<span ng-show="innerForm.name.$error.pattern" class="text-danger pull-right" translate="Please enter a integer value."></span>
												<span ng-show="innerForm.name.$error.min" class="text-danger pull-right" id="minErrorHolder{{$parent.editable.name}}">Please enter Field Value grater</span>
											</div>
											<div ng-if="$parent.editable.name == 'kilometer_reading'">
												<ng-form name="innerForm" ng-class="{'has-error':(innerForm.name.$error.required && submit) || innerForm.name.$error.pattern}">
													<label style="font-weight: 100;">{{editable.label}}</label>
													<span ng-show="{{editable.mandatory}}" class="text-danger field-error mandatory-label">*</span>
													<input id="{{$parent.editable.name}}IdEle" type="number" name="name" min="{{lastHMR}}" class="form-control" ng-model-options="{updateOn:'blur'}" ng-pattern="/^[\-\+\ ]?\d+$/" ng-trim="false" ng-model="data[$parent.editable.name]" ng-required="{{editable.mandatory}}">
												</ng-form>
												<span ng-show="innerForm.name.$error.pattern" class="text-danger pull-right" translate="Please enter a integer value."></span>
												<span ng-show="innerForm.name.$error.min" class="text-danger pull-right" id="minErrorHolder{{$parent.editable.name}}">Please enter Field Value grater</span>
											</div>
											<div ng-if="$parent.editable.name != 'hmr' && $parent.editable.name != 'kilometer_reading'">
												<ng-form name="innerForm" ng-class="{'has-error':(innerForm.name.$error.required && submit) || innerForm.name.$error.pattern}">
													<label style="font-weight: 100;">{{editable.label}}</label>
													<span ng-show="{{editable.mandatory}}" class="text-danger field-error mandatory-label">*</span>
													<input id="{{$parent.editable.name}}IdEle" type="number" name="name" class="form-control" ng-model-options="{updateOn:'blur'}" ng-pattern="/^[\-\+\ ]?\d+$/" ng-trim="false" ng-model="data[$parent.editable.name]" ng-required="{{editable.mandatory}}">
												</ng-form>
												<span ng-show="innerForm.name.$error.pattern" class="text-danger pull-right" translate="Please enter a integer value."></span>
												<span ng-show="innerForm.name.$error.min" class="text-danger pull-right" id="minErrorHolder{{$parent.editable.name}}">Please enter Field Value grater</span>
											</div>
										</div>
										<div ng-switch-when="skype">
											<ng-form name="innerForm" ng-class="{'has-error':innerForm.name.$error.required && submit}">
												<label style="font-weight: 100;">{{editable.label}}</label>
												<span ng-show="{{editable.mandatory}}" class="text-danger field-error mandatory-label">*</span>
												<input type="text" name="name" class="form-control" ng-model="data[$parent.editable.name]" ng-required="{{editable.mandatory}}">
											</ng-form>
										</div>
										<div ng-switch-when="email">
											<ng-form name="innerForm" ng-class="{'has-error':(innerForm.name.$error.required && submit) || innerForm.name.$error.pattern}">
												<label style="font-weight: 100;">{{editable.label}}</label>
												<span ng-show="{{editable.mandatory}}" class="text-danger field-error mandatory-label">*</span>
												<input type="text" name="name" ng-model-options="{updateOn:'blur'}" ng-pattern='/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/' class="form-control"
												ng-trim="false" ng-model="data[$parent.editable.name]" ng-required="{{editable.mandatory}}">
											</ng-form>
											<span ng-show="innerForm.name.$error.pattern" class="text-danger pull-right" translate="Please enter a valid E-mail address."></span>
										</div>
										<div ng-switch-when="double">
											<ng-form name="innerForm" ng-class="{'has-error':(innerForm.name.$error.required && submit) || innerForm.name.$error.pattern}">
												<label style="font-weight: 100;">{{editable.label}}</label>
												<span ng-show="{{editable.mandatory}}" class="text-danger field-error mandatory-label">*</span>
												<input type="double" name="name" ng-model-options="{updateOn:'blur'}" ng-pattern="/^-?\d*(\.\d*)?$/" class="form-control" ng-model="data[$parent.editable.name]" ng-trim="false" ng-required="{{editable.mandatory}}">
											</ng-form>
											<span ng-show="innerForm.name.$error.pattern" class="text-danger pull-right" translate="Please enter integer value."></span>
										</div>
										<div ng-switch-when="phone">
											<ng-form name="innerForm" ng-class="{'has-error':innerForm.name.$error.required && submit}">
												<label style="font-weight: 100;">{{editable.label}}</label><br>
												<span ng-show="{{editable.mandatory}}" class="text-danger field-error  mandatory-label">*</span>
												<input  id="phonenumber" type="tel"  class="form-control" ng-model="data[$parent.editable.name]" ng-required="{{editable.mandatory}}">
												<span id="valid-msg" class="hide text-danger">? Valid</span>
												<span id="error-msg" class="hide text-danger">Invalid number</span>
											</ng-form>
										</div>
										<div ng-switch-when="time">
											<ng-form name="innerForm" ng-class="{'has-error':innerForm.name.$error.required && submit}">
												<label>{{editable.label}}</label>
												<span ng-show="{{editable.mandatory}}" class="text-danger field-error mandatory-label">*</span>
												<p class="input-group timepicker">
													<input type="text" class="form-control" name="name" timepicker-popup minute-step="15" hour-step="1" ng-model="data[$parent.editable.name]" is-open="timemodel[$parent.editable.name]" enable-date="false" show-meridian="true" ng-required="{{editable.mandatory}}" show-button-bar="false"
													portal-time>
													<span class="input-group-btn">
														<button type="button" class="btn btn-soft-secondary" ng-click="openTimePicker($event,$parent.editable.name)"><i class="glyphicon glyphicon-time"></i></button>
													</span>
												</p>
											</ng-form>
										</div>
										<div ng-switch-when="currency">
											<ng-form name="innerForm" ng-class="{'has-error':(innerForm.name.$error.required && submit) || innerForm.name.$error.pattern}">
												<label style="font-weight: 100;">{{editable.label}}</label>
												<span ng-show="{{editable.mandatory}}" class="text-danger field-error mandatory-label">*</span>
												<div class="input-group">
													<span class="input-group-addon">$</span>
													<input type="text" name="name" ng-model-options="{updateOn:'blur'}" ng-pattern="/^\d*\.?\d*$/" class="form-control" ng-model="data[$parent.editable.name]" ng-trim="false" ng-required="{{editable.mandatory}}">
												</div>
												<span ng-show="innerForm.name.$error.pattern" class="text-danger pull-right field-error" translate="Please enter positive numbers."></span>
											</ng-form>
										</div>
										<div ng-switch-when="date">
											<div ng-if="$parent.editable.name == 'date_of_failure'">
												<ng-form name="innerForm" ng-class="{'has-error':innerForm.name.$error.required && submit}">
													<label style="font-weight: 100;">{{editable.label}}</label>
													<span ng-show="{{editable.mandatory}}" class="text-danger field-error mandatory-label">*</span>
													<p class="input-group datepicker">
														<input type="text" class="form-control" name="name" datepicker-popup="dd-MM-yyyy" show-weeks="false" ng-model="data[$parent.editable.name]" is-open="datemodel[$parent.editable.name]" max-date="maxDate" min-date="minDate" close-text="Close" ng-required="{{editable.mandatory}}" show-button-bar="false"
														close-on-date-selection="true" portal-date>
														<span class="input-group-btn">
															<button type="button" class="btn btn-soft-secondary" ng-click="openDatePicker($event,$parent.editable.name)"><i class="glyphicon glyphicon-calendar"></i></button>
														</span>
													</p>
												</ng-form>
											</div>
											<div ng-if="$parent.editable.name != 'date_of_failure'">
												<ng-form name="innerForm" ng-class="{'has-error':innerForm.name.$error.required && submit}">
													<label style="font-weight: 100;">{{editable.label}}</label>
													<span ng-show="{{editable.mandatory}}" class="text-danger field-error mandatory-label">*</span>
													<p class="input-group datepicker">
														<input type="text" class="form-control" name="name" datepicker-popup="dd-MM-yyyy" show-weeks="false" ng-model="data[$parent.editable.name]" is-open="datemodel[$parent.editable.name]" close-text="Close" ng-required="{{editable.mandatory}}" show-button-bar="false"
														close-on-date-selection="true" portal-date>
														<span class="input-group-btn">
															<button type="button" class="btn btn-soft-secondary" ng-click="openDatePicker($event,$parent.editable.name)"><i class="glyphicon glyphicon-calendar"></i></button>
														</span>
													</p>
												</ng-form>
											</div>
										</div>
										<div ng-switch-when="url">
											<ng-form name="innerForm" ng-class="{'has-error':(innerForm.name.$error.required && submit) || innerForm.name.$error.url}">
												<label>{{editable.label}}</label>
												<span ng-show="{{editable.mandatory}}" class="text-danger field-error mandatory-label">*</span>
												<input type="url" name="name" class="form-control" ng-model-options="{updateOn:'blur'}" ng-model="data[$parent.editable.name]" ng-trim="false" ng-required="{{editable.mandatory}}">
											</ng-form>
											<span ng-show="innerForm.name.$error.url" class="text-danger pull-right field-error" translate="Please enter a valid Url."></span>
										</div>
										<div ng-switch-when="boolean">
											<div class="checkbox" style="padding:10px;margin-top:20px;">
												<ng-form name="innerForm" ng-class="{'has-error':innerForm.name.$error.required && submit}">
													<div style="font-weight:bold;margin-left:10px;">
														<input ng-change="handledependency($parent.editable.name,data[$parent.editable.name])"type="checkbox" name="name" style="cursor:pointer;" ng-model="data[$parent.editable.name]" ng-required="{{editable.mandatory}}">{{editable.label}}
														<span ng-show="{{editable.mandatory}}" class="text-danger mandatory-label">*</span>
													</div>
												</ng-form>
											</div>
										</div>
										<div ng-switch-when="reference">
											<ng-form name="innerForm" ng-class="{'has-error':(innerForm.name.$error.required || innerForm.name.$error.editable)  && submit}">
												<label>{{editable.label}}</label>
												<span ng-show="{{editable.mandatory}}" class="text-danger field-error mandatory-label">*</span>
												<input id="{{$parent.editable.name}}IdEle" typeahead-on-select="handleTypeHeadSelet($item, $model, $label)" type="text" name="name" ng-model="data[$parent.editable.name]" typeahead="record as record.label for record in fetchReferenceRecords(editable.type.refersTo[0],$viewValue)" typeahead-min-length="3" typeahead-wait-ms="10" typeahead-editable="false"
												class="form-control" placeholder="{{'Type 3 characters'|translate}}" typeahead-loading="loadingRecords" ng-required="{{editable.mandatory}}" ng-trim="false">
												<i ng-show="loadingRecords" class="glyphicon glyphicon-refresh"></i>
											</ng-form>
											<span ng-show="innerForm.name.$error.editable && submit" class="text-danger pull-right field-error" translate="Record not found."></span>
										</div>
										<div  ng-switch-when="text">
											<ng-form name="innerForm" ng-class="{'has-error':innerForm.name.$error.required && submit}">
												<label style="font-weight: 100;">{{editable.label}}</label>
												<span ng-show="{{editable.mandatory}}" class="text-danger mandatory-label">*</span>
												<textarea msd-elastic class="form-control" name="name" style="resize:none;height:100px;" ng-model="data[editable.name]" ng-required="{{editable.mandatory}}"></textarea>
											</ng-form>
										</div>
										<div  ng-switch-when="image">
											<ng-form name="innerForm" ng-class="{'has-error':innerForm.name.$error.required && submit}">
												<label style="font-weight: 100;">{{editable.label}}</label>
												<span ng-show="{{editable.mandatory}}" class="text-danger mandatory-label">*</span>
												<input  type="file" id="fileupload" name="fileupload" file-input="attachedImage" ng-required="true"/>
											</ng-form>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			</div>
			</div>
			</div>
			</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-soft-danger" ng-click="cancel()" translate="Cancel">Cancel</button>
				<button type="submit" class="btn btn-soft-success" ng-click="save(ticketForm.$valid)" translate="Save">Save</button>
			</div>
		</form>
        <script src="build/js/intlTelInput.js"></script>
</script>
{/literal}